// koffee 1.4.0
var Action, Actor, Camera, Material, ScreenText, Timer, Vector, first, last, ref,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

ref = require('kxk'), first = ref.first, last = ref.last;

Camera = require('./camera');

Action = require('./action');

Timer = require('./timer');

Actor = require('./actor');

Vector = require('./lib/vector');

Material = require('./material');

ScreenText = (function(superClass) {
    extend(ScreenText, superClass);

    ScreenText.init = function() {
        return this.font = new THREE.Font(require('three/examples/fonts/helvetiker_bold.typeface.json'));
    };

    function ScreenText(text) {
        var i, l, len, ref1;
        ScreenText.__super__.constructor.apply(this, arguments);
        this.addAction(new Action(this, Action.SHOW, "show" + this.constructor.name, 500));
        this.addAction(new Action(this, Action.HIDE, "hide" + this.constructor.name, 500));
        this.scene = new THREE.Scene();
        if (this.lineHeight == null) {
            this.lineHeight = 1.3;
        }
        this.sun = new THREE.PointLight(0xffffff);
        this.sun.position.set(-1, 1, 10);
        this.scene.add(this.sun);
        this.width = this.height = 0;
        this.mesh = new THREE.Object3D;
        this.scene.add(this.mesh);
        this.fov = 20;
        this.aspect = world.screenSize.w / world.screenSize.h;
        this.near = 0.1;
        this.far = 100;
        this.camera = new THREE.PerspectiveCamera(this.fov, this.aspect, this.near, this.far);
        if (text != null) {
            ref1 = text.split('\n');
            for (i = 0, len = ref1.length; i < len; i++) {
                l = ref1[i];
                this.addText(l);
            }
            this.show();
        }
    }

    ScreenText.prototype.del = function() {
        this.scene.remove(this.mesh);
        this.scene.remove(this.sun);
        Timer.removeActionsOfObject(this);
        if (world.text === this) {
            return world.text = null;
        }
    };

    ScreenText.prototype.show = function() {
        return this.startTimedAction(this.getActionWithId(Action.SHOW));
    };

    ScreenText.prototype.addText = function(str, scaleFactor) {
        var geom, max, mesh, min, z;
        geom = new THREE.TextGeometry(str, {
            font: ScreenText.font,
            size: 1,
            height: 4,
            bevelEnabled: true,
            bevelThickness: 0.1,
            bevelSize: 0.04
        });
        this.width = Math.max(str.length, this.width);
        geom.computeBoundingBox();
        min = geom.boundingBox.min;
        max = geom.boundingBox.max;
        mesh = new THREE.Mesh(geom, Material.text.clone());
        mesh.translateX(-(max.x - min.x) / 2);
        mesh.translateY(-this.height * this.lineHeight);
        this.mesh.add(mesh);
        this.mesh.position.set(0, this.height / 2 * this.lineHeight, 0);
        z = 20 + 4 * this.height;
        this.camera.position.copy(new Vector(0, 0, z));
        this.sun.position.set(-z / 5, z / 5, z);
        this.camera.lookAt(new Vector(0, 0, 0));
        return this.height += 1;
    };

    ScreenText.prototype.setOpacity = function(o) {
        var c, i, len, ref1, results;
        ref1 = this.mesh.children;
        results = [];
        for (i = 0, len = ref1.length; i < len; i++) {
            c = ref1[i];
            results.push(c.material.opacity = o);
        }
        return results;
    };

    ScreenText.prototype.resized = function(w, h) {
        this.aspect = w / h;
        this.camera.aspect = this.aspect;
        return this.camera.updateProjectionMatrix();
    };

    ScreenText.prototype.performAction = function(action) {
        switch (action.id) {
            case Action.SHOW:
                return this.setOpacity(action.getRelativeTime());
            case Action.HIDE:
                return this.setOpacity(1 - action.getRelativeTime());
        }
    };

    ScreenText.prototype.actionFinished = function(action) {
        switch (action.id) {
            case Action.HIDE:
                return this.del();
            case Action.SHOW:
                return this.setOpacity(1);
        }
    };

    ScreenText.prototype.fadeOut = function() {
        if (this.fadingOut) {
            return;
        }
        this.fadingOut = true;
        this.stopAction(this.getActionWithId(Action.SHOW));
        return this.startTimedAction(this.getActionWithId(Action.HIDE));
    };

    return ScreenText;

})(Actor);

module.exports = ScreenText;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyZWVudGV4dC5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQU9BLElBQUEsNEVBQUE7SUFBQTs7O0FBQUEsTUFBa0IsT0FBQSxDQUFRLEtBQVIsQ0FBbEIsRUFBRSxpQkFBRixFQUFTOztBQUNULE1BQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFDWCxNQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBQ1gsS0FBQSxHQUFXLE9BQUEsQ0FBUSxTQUFSOztBQUNYLEtBQUEsR0FBVyxPQUFBLENBQVEsU0FBUjs7QUFDWCxNQUFBLEdBQVcsT0FBQSxDQUFRLGNBQVI7O0FBQ1gsUUFBQSxHQUFXLE9BQUEsQ0FBUSxZQUFSOztBQUVMOzs7SUFFRixVQUFDLENBQUEsSUFBRCxHQUFPLFNBQUE7ZUFBRyxJQUFDLENBQUEsSUFBRCxHQUFRLElBQUksS0FBSyxDQUFDLElBQVYsQ0FBZSxPQUFBLENBQVEsb0RBQVIsQ0FBZjtJQUFYOztJQUVNLG9CQUFDLElBQUQ7QUFDVCxZQUFBO1FBQUEsNkNBQUEsU0FBQTtRQUNBLElBQUMsQ0FBQSxTQUFELENBQVcsSUFBSSxNQUFKLENBQVcsSUFBWCxFQUFjLE1BQU0sQ0FBQyxJQUFyQixFQUEyQixNQUFBLEdBQU8sSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUEvQyxFQUF3RCxHQUF4RCxDQUFYO1FBQ0EsSUFBQyxDQUFBLFNBQUQsQ0FBVyxJQUFJLE1BQUosQ0FBVyxJQUFYLEVBQWMsTUFBTSxDQUFDLElBQXJCLEVBQTJCLE1BQUEsR0FBTyxJQUFDLENBQUEsV0FBVyxDQUFDLElBQS9DLEVBQXdELEdBQXhELENBQVg7UUFFQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksS0FBSyxDQUFDLEtBQVYsQ0FBQTtRQUNULElBQXlCLHVCQUF6QjtZQUFBLElBQUMsQ0FBQSxVQUFELEdBQWMsSUFBZDs7UUFDQSxJQUFDLENBQUEsR0FBRCxHQUFPLElBQUksS0FBSyxDQUFDLFVBQVYsQ0FBcUIsUUFBckI7UUFDUCxJQUFDLENBQUEsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFkLENBQWtCLENBQUMsQ0FBbkIsRUFBcUIsQ0FBckIsRUFBdUIsRUFBdkI7UUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsR0FBWjtRQUVBLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBQyxDQUFBLE1BQUQsR0FBVTtRQUNuQixJQUFDLENBQUEsSUFBRCxHQUFRLElBQUksS0FBSyxDQUFDO1FBQ2xCLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxJQUFaO1FBQ0EsSUFBQyxDQUFBLEdBQUQsR0FBTztRQUNQLElBQUMsQ0FBQSxNQUFELEdBQVUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFqQixHQUFtQixLQUFLLENBQUMsVUFBVSxDQUFDO1FBQzlDLElBQUMsQ0FBQSxJQUFELEdBQVE7UUFDUixJQUFDLENBQUEsR0FBRCxHQUFRO1FBQ1IsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFJLEtBQUssQ0FBQyxpQkFBVixDQUE0QixJQUFDLENBQUEsR0FBN0IsRUFBa0MsSUFBQyxDQUFBLE1BQW5DLEVBQTJDLElBQUMsQ0FBQSxJQUE1QyxFQUFrRCxJQUFDLENBQUEsR0FBbkQ7UUFDVixJQUFHLFlBQUg7QUFDSTtBQUFBLGlCQUFBLHNDQUFBOztnQkFDSSxJQUFDLENBQUEsT0FBRCxDQUFTLENBQVQ7QUFESjtZQUVBLElBQUMsQ0FBQSxJQUFELENBQUEsRUFISjs7SUFuQlM7O3lCQXdCYixHQUFBLEdBQUssU0FBQTtRQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxDQUFjLElBQUMsQ0FBQSxJQUFmO1FBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLENBQWMsSUFBQyxDQUFBLEdBQWY7UUFDQSxLQUFLLENBQUMscUJBQU4sQ0FBNEIsSUFBNUI7UUFDQSxJQUFxQixLQUFLLENBQUMsSUFBTixLQUFjLElBQW5DO21CQUFBLEtBQUssQ0FBQyxJQUFOLEdBQWEsS0FBYjs7SUFKQzs7eUJBTUwsSUFBQSxHQUFNLFNBQUE7ZUFBRyxJQUFDLENBQUEsZ0JBQUQsQ0FBa0IsSUFBQyxDQUFBLGVBQUQsQ0FBaUIsTUFBTSxDQUFDLElBQXhCLENBQWxCO0lBQUg7O3lCQUVOLE9BQUEsR0FBUyxTQUFDLEdBQUQsRUFBTSxXQUFOO0FBQ0wsWUFBQTtRQUFBLElBQUEsR0FBTyxJQUFJLEtBQUssQ0FBQyxZQUFWLENBQXVCLEdBQXZCLEVBQ0g7WUFBQSxJQUFBLEVBQU0sVUFBVSxDQUFDLElBQWpCO1lBQ0EsSUFBQSxFQUFNLENBRE47WUFFQSxNQUFBLEVBQVEsQ0FGUjtZQUdBLFlBQUEsRUFBYyxJQUhkO1lBSUEsY0FBQSxFQUFnQixHQUpoQjtZQUtBLFNBQUEsRUFBVyxJQUxYO1NBREc7UUFRUCxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksQ0FBQyxHQUFMLENBQVMsR0FBRyxDQUFDLE1BQWIsRUFBcUIsSUFBQyxDQUFBLEtBQXRCO1FBQ1QsSUFBSSxDQUFDLGtCQUFMLENBQUE7UUFDQSxHQUFBLEdBQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUN2QixHQUFBLEdBQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUN2QixJQUFBLEdBQU8sSUFBSSxLQUFLLENBQUMsSUFBVixDQUFlLElBQWYsRUFBcUIsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFkLENBQUEsQ0FBckI7UUFDUCxJQUFJLENBQUMsVUFBTCxDQUFnQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUosR0FBTSxHQUFHLENBQUMsQ0FBWCxDQUFELEdBQWUsQ0FBL0I7UUFDQSxJQUFJLENBQUMsVUFBTCxDQUFnQixDQUFDLElBQUMsQ0FBQSxNQUFGLEdBQVcsSUFBQyxDQUFBLFVBQTVCO1FBQ0EsSUFBQyxDQUFBLElBQUksQ0FBQyxHQUFOLENBQVUsSUFBVjtRQUNBLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQWYsQ0FBbUIsQ0FBbkIsRUFBc0IsSUFBQyxDQUFBLE1BQUQsR0FBUSxDQUFSLEdBQVUsSUFBQyxDQUFBLFVBQWpDLEVBQTZDLENBQTdDO1FBR0EsQ0FBQSxHQUFJLEVBQUEsR0FBRyxDQUFBLEdBQUUsSUFBQyxDQUFBO1FBQ1YsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBakIsQ0FBc0IsSUFBSSxNQUFKLENBQVcsQ0FBWCxFQUFhLENBQWIsRUFBZSxDQUFmLENBQXRCO1FBQ0EsSUFBQyxDQUFBLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBZCxDQUFrQixDQUFDLENBQUQsR0FBRyxDQUFyQixFQUF1QixDQUFBLEdBQUUsQ0FBekIsRUFBMkIsQ0FBM0I7UUFDQSxJQUFDLENBQUEsTUFBTSxDQUFDLE1BQVIsQ0FBZSxJQUFJLE1BQUosQ0FBVyxDQUFYLEVBQWEsQ0FBYixFQUFlLENBQWYsQ0FBZjtlQUNBLElBQUMsQ0FBQSxNQUFELElBQVc7SUF4Qk47O3lCQTBCVCxVQUFBLEdBQVksU0FBQyxDQUFEO0FBQ1IsWUFBQTtBQUFBO0FBQUE7YUFBQSxzQ0FBQTs7eUJBQ0ksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFYLEdBQXFCO0FBRHpCOztJQURROzt5QkFJWixPQUFBLEdBQVMsU0FBQyxDQUFELEVBQUcsQ0FBSDtRQUNMLElBQUMsQ0FBQSxNQUFELEdBQVUsQ0FBQSxHQUFFO1FBQ1osSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLEdBQWlCLElBQUMsQ0FBQTtlQUNsQixJQUFDLENBQUEsTUFBTSxDQUFDLHNCQUFSLENBQUE7SUFISzs7eUJBS1QsYUFBQSxHQUFlLFNBQUMsTUFBRDtBQUNYLGdCQUFPLE1BQU0sQ0FBQyxFQUFkO0FBQUEsaUJBQ1MsTUFBTSxDQUFDLElBRGhCO3VCQUVRLElBQUMsQ0FBQSxVQUFELENBQVksTUFBTSxDQUFDLGVBQVAsQ0FBQSxDQUFaO0FBRlIsaUJBR1MsTUFBTSxDQUFDLElBSGhCO3VCQUlRLElBQUMsQ0FBQSxVQUFELENBQVksQ0FBQSxHQUFJLE1BQU0sQ0FBQyxlQUFQLENBQUEsQ0FBaEI7QUFKUjtJQURXOzt5QkFPZixjQUFBLEdBQWdCLFNBQUMsTUFBRDtBQUNaLGdCQUFPLE1BQU0sQ0FBQyxFQUFkO0FBQUEsaUJBQ1MsTUFBTSxDQUFDLElBRGhCO3VCQUVRLElBQUMsQ0FBQSxHQUFELENBQUE7QUFGUixpQkFHUyxNQUFNLENBQUMsSUFIaEI7dUJBSVEsSUFBQyxDQUFBLFVBQUQsQ0FBWSxDQUFaO0FBSlI7SUFEWTs7eUJBT2hCLE9BQUEsR0FBUyxTQUFBO1FBQ0wsSUFBVSxJQUFDLENBQUEsU0FBWDtBQUFBLG1CQUFBOztRQUNBLElBQUMsQ0FBQSxTQUFELEdBQWE7UUFDYixJQUFDLENBQUEsVUFBRCxDQUFZLElBQUMsQ0FBQSxlQUFELENBQWlCLE1BQU0sQ0FBQyxJQUF4QixDQUFaO2VBQ0EsSUFBQyxDQUFBLGdCQUFELENBQWtCLElBQUMsQ0FBQSxlQUFELENBQWlCLE1BQU0sQ0FBQyxJQUF4QixDQUFsQjtJQUpLOzs7O0dBckZZOztBQTJGekIsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiMgICAgMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwXG4jICAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwMCAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAgMDAwIDAwMCAgICAgIDAwMCAgIFxuIyAgIDAwMDAwMDAgICAwMDAgICAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAwIDAwMCAgICAgMDAwICAgICAwMDAwMDAwICAgICAwMDAwMCAgICAgICAwMDAgICBcbiMgICAgICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgIDAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgMDAwICAgICAgMDAwICAgXG4jICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAgIDAwMCAgIFxuXG57IGZpcnN0LCBsYXN0IH0gPSByZXF1aXJlICdreGsnXG5DYW1lcmEgICA9IHJlcXVpcmUgJy4vY2FtZXJhJ1xuQWN0aW9uICAgPSByZXF1aXJlICcuL2FjdGlvbidcblRpbWVyICAgID0gcmVxdWlyZSAnLi90aW1lcidcbkFjdG9yICAgID0gcmVxdWlyZSAnLi9hY3RvcidcblZlY3RvciAgID0gcmVxdWlyZSAnLi9saWIvdmVjdG9yJ1xuTWF0ZXJpYWwgPSByZXF1aXJlICcuL21hdGVyaWFsJ1xuXG5jbGFzcyBTY3JlZW5UZXh0IGV4dGVuZHMgQWN0b3IgICAgXG4gICAgXG4gICAgQGluaXQ6IC0+IEBmb250ID0gbmV3IFRIUkVFLkZvbnQgcmVxdWlyZSAndGhyZWUvZXhhbXBsZXMvZm9udHMvaGVsdmV0aWtlcl9ib2xkLnR5cGVmYWNlLmpzb24nXG4gICAgICAgIFxuICAgIGNvbnN0cnVjdG9yOiAodGV4dCkgLT5cbiAgICAgICAgc3VwZXJcbiAgICAgICAgQGFkZEFjdGlvbiBuZXcgQWN0aW9uIEAsIEFjdGlvbi5TSE9XLCBcInNob3cje0Bjb25zdHJ1Y3Rvci5uYW1lfVwiLCAgNTAwXG4gICAgICAgIEBhZGRBY3Rpb24gbmV3IEFjdGlvbiBALCBBY3Rpb24uSElERSwgXCJoaWRlI3tAY29uc3RydWN0b3IubmFtZX1cIiwgIDUwMFxuICAgICAgICAgICAgICAgIFxuICAgICAgICBAc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKVxuICAgICAgICBAbGluZUhlaWdodCA9IDEuMyBpZiBub3QgQGxpbmVIZWlnaHQ/XG4gICAgICAgIEBzdW4gPSBuZXcgVEhSRUUuUG9pbnRMaWdodCAweGZmZmZmZlxuICAgICAgICBAc3VuLnBvc2l0aW9uLnNldCAtMSwxLDEwXG4gICAgICAgIEBzY2VuZS5hZGQgQHN1blxuICAgICAgICBcbiAgICAgICAgQHdpZHRoID0gQGhlaWdodCA9IDBcbiAgICAgICAgQG1lc2ggPSBuZXcgVEhSRUUuT2JqZWN0M0RcbiAgICAgICAgQHNjZW5lLmFkZCBAbWVzaFxuICAgICAgICBAZm92ID0gMjBcbiAgICAgICAgQGFzcGVjdCA9IHdvcmxkLnNjcmVlblNpemUudy93b3JsZC5zY3JlZW5TaXplLmhcbiAgICAgICAgQG5lYXIgPSAwLjFcbiAgICAgICAgQGZhciAgPSAxMDBcbiAgICAgICAgQGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSBAZm92LCBAYXNwZWN0LCBAbmVhciwgQGZhclxuICAgICAgICBpZiB0ZXh0P1xuICAgICAgICAgICAgZm9yIGwgaW4gdGV4dC5zcGxpdCAnXFxuJ1xuICAgICAgICAgICAgICAgIEBhZGRUZXh0IGwgXG4gICAgICAgICAgICBAc2hvdygpXG4gICAgXG4gICAgZGVsOiAtPlxuICAgICAgICBAc2NlbmUucmVtb3ZlIEBtZXNoXG4gICAgICAgIEBzY2VuZS5yZW1vdmUgQHN1blxuICAgICAgICBUaW1lci5yZW1vdmVBY3Rpb25zT2ZPYmplY3QgQFxuICAgICAgICB3b3JsZC50ZXh0ID0gbnVsbCBpZiB3b3JsZC50ZXh0ID09IEBcbiAgICBcbiAgICBzaG93OiAtPiBAc3RhcnRUaW1lZEFjdGlvbiBAZ2V0QWN0aW9uV2l0aElkIEFjdGlvbi5TSE9XXG4gICAgXG4gICAgYWRkVGV4dDogKHN0ciwgc2NhbGVGYWN0b3IpIC0+XG4gICAgICAgIGdlb20gPSBuZXcgVEhSRUUuVGV4dEdlb21ldHJ5IHN0ciwgXG4gICAgICAgICAgICBmb250OiBTY3JlZW5UZXh0LmZvbnRcbiAgICAgICAgICAgIHNpemU6IDFcbiAgICAgICAgICAgIGhlaWdodDogNFxuICAgICAgICAgICAgYmV2ZWxFbmFibGVkOiB0cnVlXG4gICAgICAgICAgICBiZXZlbFRoaWNrbmVzczogMC4xXG4gICAgICAgICAgICBiZXZlbFNpemU6IDAuMDRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgQHdpZHRoID0gTWF0aC5tYXggc3RyLmxlbmd0aCwgQHdpZHRoXG4gICAgICAgIGdlb20uY29tcHV0ZUJvdW5kaW5nQm94KClcbiAgICAgICAgbWluID0gZ2VvbS5ib3VuZGluZ0JveC5taW5cbiAgICAgICAgbWF4ID0gZ2VvbS5ib3VuZGluZ0JveC5tYXhcbiAgICAgICAgbWVzaCA9IG5ldyBUSFJFRS5NZXNoIGdlb20sIE1hdGVyaWFsLnRleHQuY2xvbmUoKVxuICAgICAgICBtZXNoLnRyYW5zbGF0ZVggLShtYXgueC1taW4ueCkvMlxuICAgICAgICBtZXNoLnRyYW5zbGF0ZVkgLUBoZWlnaHQgKiBAbGluZUhlaWdodFxuICAgICAgICBAbWVzaC5hZGQgbWVzaFxuICAgICAgICBAbWVzaC5wb3NpdGlvbi5zZXQgMCwgQGhlaWdodC8yKkBsaW5lSGVpZ2h0LCAwXG4gICAgICAgIFxuICAgICAgICAjIGFkanVzdCBwcm9qZWN0aW9uICBcbiAgICAgICAgeiA9IDIwKzQqQGhlaWdodFxuICAgICAgICBAY2FtZXJhLnBvc2l0aW9uLmNvcHkgbmV3IFZlY3RvciAwLDAselxuICAgICAgICBAc3VuLnBvc2l0aW9uLnNldCAtei81LHovNSx6XG4gICAgICAgIEBjYW1lcmEubG9va0F0IG5ldyBWZWN0b3IgMCwwLDBcbiAgICAgICAgQGhlaWdodCArPSAxXG5cbiAgICBzZXRPcGFjaXR5OiAobykgLT5cbiAgICAgICAgZm9yIGMgaW4gQG1lc2guY2hpbGRyZW5cbiAgICAgICAgICAgIGMubWF0ZXJpYWwub3BhY2l0eSA9IG9cblxuICAgIHJlc2l6ZWQ6ICh3LGgpIC0+XG4gICAgICAgIEBhc3BlY3QgPSB3L2hcbiAgICAgICAgQGNhbWVyYS5hc3BlY3QgPSBAYXNwZWN0XG4gICAgICAgIEBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpXG4gICAgXG4gICAgcGVyZm9ybUFjdGlvbjogKGFjdGlvbikgLT5cbiAgICAgICAgc3dpdGNoIGFjdGlvbi5pZFxuICAgICAgICAgICAgd2hlbiBBY3Rpb24uU0hPV1xuICAgICAgICAgICAgICAgIEBzZXRPcGFjaXR5IGFjdGlvbi5nZXRSZWxhdGl2ZVRpbWUoKVxuICAgICAgICAgICAgd2hlbiBBY3Rpb24uSElERVxuICAgICAgICAgICAgICAgIEBzZXRPcGFjaXR5IDEgLSBhY3Rpb24uZ2V0UmVsYXRpdmVUaW1lKClcbiAgICBcbiAgICBhY3Rpb25GaW5pc2hlZDogKGFjdGlvbikgLT5cbiAgICAgICAgc3dpdGNoIGFjdGlvbi5pZFxuICAgICAgICAgICAgd2hlbiBBY3Rpb24uSElERVxuICAgICAgICAgICAgICAgIEBkZWwoKVxuICAgICAgICAgICAgd2hlbiBBY3Rpb24uU0hPV1xuICAgICAgICAgICAgICAgIEBzZXRPcGFjaXR5IDFcbiAgICAgICAgICAgIFxuICAgIGZhZGVPdXQ6IC0+IFxuICAgICAgICByZXR1cm4gaWYgQGZhZGluZ091dFxuICAgICAgICBAZmFkaW5nT3V0ID0gdHJ1ZVxuICAgICAgICBAc3RvcEFjdGlvbiBAZ2V0QWN0aW9uV2l0aElkIEFjdGlvbi5TSE9XXG4gICAgICAgIEBzdGFydFRpbWVkQWN0aW9uIEBnZXRBY3Rpb25XaXRoSWQgQWN0aW9uLkhJREVcbiAgICBcbm1vZHVsZS5leHBvcnRzID0gU2NyZWVuVGV4dFxuICAgICJdfQ==
//# sourceURL=../coffee/screentext.coffee