// koffee 1.4.0
var $, BrowserWindow, Kiki, electron, ipc, pkg, ref, remote, screenShot, screenSize, win, winID;

ref = require('kxk'), win = ref.win, $ = ref.$;

Kiki = require('./kiki');

electron = require('electron');

pkg = require('../package.json');

ipc = electron.ipcRenderer;

remote = electron.remote;

BrowserWindow = remote.BrowserWindow;

winID = null;

ipc.on('setWinID', (function(_this) {
    return function(event, id) {
        return winID = window.winID = id;
    };
})(this));

screenSize = (function(_this) {
    return function() {
        return electron.screen.getPrimaryDisplay().workAreaSize;
    };
})(this);

window.onresize = (function(_this) {
    return function() {
        return window.stage.resized();
    };
})(this);

window.onunload = (function(_this) {
    return function() {};
})(this);

window.onload = (function(_this) {
    return function() {
        window.stage = new Kiki($(".stage"));
        return window.stage.start();
    };
})(this);

screenShot = function() {
    win = BrowserWindow.fromId(winID);
    return win.capturePage(function(img) {
        var file;
        file = 'screenShot.png';
        return remote.require('fs').writeFile(file, img.toPng(), function(err) {
            if (err != null) {
                console.log('saving screenshot failed', err);
            }
            return console.log("screenshot saved to " + file);
        });
    });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luZG93LmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBTUEsSUFBQTs7QUFBQSxNQUFhLE9BQUEsQ0FBUSxLQUFSLENBQWIsRUFBRSxhQUFGLEVBQU87O0FBRVAsSUFBQSxHQUFjLE9BQUEsQ0FBUSxRQUFSOztBQUNkLFFBQUEsR0FBYyxPQUFBLENBQVEsVUFBUjs7QUFDZCxHQUFBLEdBQWMsT0FBQSxDQUFRLGlCQUFSOztBQUVkLEdBQUEsR0FBYyxRQUFRLENBQUM7O0FBQ3ZCLE1BQUEsR0FBYyxRQUFRLENBQUM7O0FBQ3ZCLGFBQUEsR0FBZ0IsTUFBTSxDQUFDOztBQUN2QixLQUFBLEdBQWM7O0FBUWQsR0FBRyxDQUFDLEVBQUosQ0FBTyxVQUFQLEVBQW1CLENBQUEsU0FBQSxLQUFBO1dBQUEsU0FBQyxLQUFELEVBQVEsRUFBUjtlQUFlLEtBQUEsR0FBUSxNQUFNLENBQUMsS0FBUCxHQUFlO0lBQXRDO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFuQjs7QUFRQSxVQUFBLEdBQWEsQ0FBQSxTQUFBLEtBQUE7V0FBQSxTQUFBO2VBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIsQ0FBQSxDQUFtQyxDQUFDO0lBQXZDO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTs7QUFFYixNQUFNLENBQUMsUUFBUCxHQUFrQixDQUFBLFNBQUEsS0FBQTtXQUFBLFNBQUE7ZUFBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQWIsQ0FBQTtJQUFIO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTs7QUFDbEIsTUFBTSxDQUFDLFFBQVAsR0FBa0IsQ0FBQSxTQUFBLEtBQUE7V0FBQSxTQUFBLEdBQUE7QUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBOztBQUNsQixNQUFNLENBQUMsTUFBUCxHQUFrQixDQUFBLFNBQUEsS0FBQTtXQUFBLFNBQUE7UUFDZCxNQUFNLENBQUMsS0FBUCxHQUFlLElBQUksSUFBSixDQUFTLENBQUEsQ0FBRSxRQUFGLENBQVQ7ZUFDZixNQUFNLENBQUMsS0FBSyxDQUFDLEtBQWIsQ0FBQTtJQUZjO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTs7QUFVbEIsVUFBQSxHQUFhLFNBQUE7SUFDVCxHQUFBLEdBQU0sYUFBYSxDQUFDLE1BQWQsQ0FBcUIsS0FBckI7V0FDTixHQUFHLENBQUMsV0FBSixDQUFnQixTQUFDLEdBQUQ7QUFDWixZQUFBO1FBQUEsSUFBQSxHQUFPO2VBQ1AsTUFBTSxDQUFDLE9BQVAsQ0FBZSxJQUFmLENBQW9CLENBQUMsU0FBckIsQ0FBK0IsSUFBL0IsRUFBcUMsR0FBRyxDQUFDLEtBQUosQ0FBQSxDQUFyQyxFQUFrRCxTQUFDLEdBQUQ7WUFDL0MsSUFBd0MsV0FBeEM7Z0JBQUEsT0FBQSxDQUFDLEdBQUQsQ0FBSywwQkFBTCxFQUFpQyxHQUFqQyxFQUFBOzttQkFBNEMsT0FBQSxDQUMzQyxHQUQyQyxDQUN2QyxzQkFBQSxHQUF1QixJQURnQjtRQURHLENBQWxEO0lBRlksQ0FBaEI7QUFGUyIsInNvdXJjZXNDb250ZW50IjpbIiMgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMFxuIyAwMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwXG4jIDAwMDAwMDAwMCAgMDAwICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMDBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyAwMCAgICAgMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAgICAgIDAwXG5cbnsgd2luLCAkIH0gPSByZXF1aXJlICdreGsnXG5cbktpa2kgICAgICAgID0gcmVxdWlyZSAnLi9raWtpJ1xuZWxlY3Ryb24gICAgPSByZXF1aXJlICdlbGVjdHJvbidcbnBrZyAgICAgICAgID0gcmVxdWlyZSAnLi4vcGFja2FnZS5qc29uJ1xuXG5pcGMgICAgICAgICA9IGVsZWN0cm9uLmlwY1JlbmRlcmVyXG5yZW1vdGUgICAgICA9IGVsZWN0cm9uLnJlbW90ZVxuQnJvd3NlcldpbmRvdyA9IHJlbW90ZS5Ccm93c2VyV2luZG93XG53aW5JRCAgICAgICA9IG51bGxcblxuIyAwMDAgIDAwMDAwMDAwICAgIDAwMDAwMDBcbiMgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgXG4jIDAwMCAgMDAwMDAwMDAgICAwMDAgICAgIFxuIyAwMDAgIDAwMCAgICAgICAgMDAwICAgICBcbiMgMDAwICAwMDAgICAgICAgICAwMDAwMDAwXG5cbmlwYy5vbiAnc2V0V2luSUQnLCAoZXZlbnQsIGlkKSA9PiB3aW5JRCA9IHdpbmRvdy53aW5JRCA9IGlkXG4gICAgXG4jIDAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgXG4jIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAgMDAwICAgIDAwMDAwMDAgXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgICAgICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4jIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwXG5cbnNjcmVlblNpemUgPSA9PiBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemVcblxud2luZG93Lm9ucmVzaXplID0gPT4gd2luZG93LnN0YWdlLnJlc2l6ZWQoKVxud2luZG93Lm9udW5sb2FkID0gPT4gXG53aW5kb3cub25sb2FkICAgPSA9PiBcbiAgICB3aW5kb3cuc3RhZ2UgPSBuZXcgS2lraSAkKFwiLnN0YWdlXCIpIFxuICAgIHdpbmRvdy5zdGFnZS5zdGFydCgpXG5cbiMgMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwXG4jMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgIFxuIzAwMDAwMDAgICAwMDAgICAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAwIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwICAgMDAwICAgICAwMDAgICBcbiMgICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgIDAwMDAgICAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgXG4jMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgIDAwMCAgIFxuXG5zY3JlZW5TaG90ID0gLT5cbiAgICB3aW4gPSBCcm93c2VyV2luZG93LmZyb21JZCB3aW5JRCBcbiAgICB3aW4uY2FwdHVyZVBhZ2UgKGltZykgLT5cbiAgICAgICAgZmlsZSA9ICdzY3JlZW5TaG90LnBuZydcbiAgICAgICAgcmVtb3RlLnJlcXVpcmUoJ2ZzJykud3JpdGVGaWxlIGZpbGUsIGltZy50b1BuZygpLCAoZXJyKSAtPiBcbiAgICAgICAgICAgIGxvZyAnc2F2aW5nIHNjcmVlbnNob3QgZmFpbGVkJywgZXJyIGlmIGVycj9cbiAgICAgICAgICAgIGxvZyBcInNjcmVlbnNob3Qgc2F2ZWQgdG8gI3tmaWxlfVwiXG4gICAgICAgICJdfQ==
//# sourceURL=../coffee/window.coffee