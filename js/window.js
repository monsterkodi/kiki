// koffee 1.4.0
var $, BrowserWindow, Kiki, electron, ipc, klog, pkg, ref, remote, screenShot, screenSize, win, winID;

ref = require('kxk'), win = ref.win, klog = ref.klog, $ = ref.$;

Kiki = require('./kiki');

electron = require('electron');

pkg = require('../package.json');

ipc = electron.ipcRenderer;

remote = electron.remote;

BrowserWindow = remote.BrowserWindow;

winID = null;

ipc.on('setWinID', (function(_this) {
    return function(event, id) {
        return winID = window.winID = id;
    };
})(this));

screenSize = (function(_this) {
    return function() {
        return electron.screen.getPrimaryDisplay().workAreaSize;
    };
})(this);

window.onresize = (function(_this) {
    return function() {
        return window.stage.resized();
    };
})(this);

window.onunload = (function(_this) {
    return function() {};
})(this);

window.onload = (function(_this) {
    return function() {
        window.stage = new Kiki($(".stage"));
        return window.stage.start();
    };
})(this);

screenShot = function() {
    win = BrowserWindow.fromId(winID);
    return win.capturePage(function(img) {
        var file;
        file = 'screenShot.png';
        return remote.require('fs').writeFile(file, img.toPng(), function(err) {
            if (err != null) {
                klog('saving screenshot failed', err);
            }
            return klog("screenshot saved to " + file);
        });
    });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luZG93LmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBTUEsSUFBQTs7QUFBQSxNQUFtQixPQUFBLENBQVEsS0FBUixDQUFuQixFQUFFLGFBQUYsRUFBTyxlQUFQLEVBQWE7O0FBRWIsSUFBQSxHQUFjLE9BQUEsQ0FBUSxRQUFSOztBQUNkLFFBQUEsR0FBYyxPQUFBLENBQVEsVUFBUjs7QUFDZCxHQUFBLEdBQWMsT0FBQSxDQUFRLGlCQUFSOztBQUVkLEdBQUEsR0FBYyxRQUFRLENBQUM7O0FBQ3ZCLE1BQUEsR0FBYyxRQUFRLENBQUM7O0FBQ3ZCLGFBQUEsR0FBZ0IsTUFBTSxDQUFDOztBQUN2QixLQUFBLEdBQWM7O0FBUWQsR0FBRyxDQUFDLEVBQUosQ0FBTyxVQUFQLEVBQW1CLENBQUEsU0FBQSxLQUFBO1dBQUEsU0FBQyxLQUFELEVBQVEsRUFBUjtlQUFlLEtBQUEsR0FBUSxNQUFNLENBQUMsS0FBUCxHQUFlO0lBQXRDO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFuQjs7QUFRQSxVQUFBLEdBQWEsQ0FBQSxTQUFBLEtBQUE7V0FBQSxTQUFBO2VBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIsQ0FBQSxDQUFtQyxDQUFDO0lBQXZDO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTs7QUFFYixNQUFNLENBQUMsUUFBUCxHQUFrQixDQUFBLFNBQUEsS0FBQTtXQUFBLFNBQUE7ZUFBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQWIsQ0FBQTtJQUFIO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTs7QUFDbEIsTUFBTSxDQUFDLFFBQVAsR0FBa0IsQ0FBQSxTQUFBLEtBQUE7V0FBQSxTQUFBLEdBQUE7QUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBOztBQUNsQixNQUFNLENBQUMsTUFBUCxHQUFrQixDQUFBLFNBQUEsS0FBQTtXQUFBLFNBQUE7UUFDZCxNQUFNLENBQUMsS0FBUCxHQUFlLElBQUksSUFBSixDQUFTLENBQUEsQ0FBRSxRQUFGLENBQVQ7ZUFDZixNQUFNLENBQUMsS0FBSyxDQUFDLEtBQWIsQ0FBQTtJQUZjO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTs7QUFVbEIsVUFBQSxHQUFhLFNBQUE7SUFDVCxHQUFBLEdBQU0sYUFBYSxDQUFDLE1BQWQsQ0FBcUIsS0FBckI7V0FDTixHQUFHLENBQUMsV0FBSixDQUFnQixTQUFDLEdBQUQ7QUFDWixZQUFBO1FBQUEsSUFBQSxHQUFPO2VBQ1AsTUFBTSxDQUFDLE9BQVAsQ0FBZSxJQUFmLENBQW9CLENBQUMsU0FBckIsQ0FBK0IsSUFBL0IsRUFBcUMsR0FBRyxDQUFDLEtBQUosQ0FBQSxDQUFyQyxFQUFrRCxTQUFDLEdBQUQ7WUFDOUMsSUFBd0MsV0FBeEM7Z0JBQUEsSUFBQSxDQUFLLDBCQUFMLEVBQWlDLEdBQWpDLEVBQUE7O21CQUNBLElBQUEsQ0FBSyxzQkFBQSxHQUF1QixJQUE1QjtRQUY4QyxDQUFsRDtJQUZZLENBQWhCO0FBRlMiLCJzb3VyY2VzQ29udGVudCI6WyIjIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAgICAwMDBcbiMgMDAwIDAgMDAwICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMFxuIyAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwXG4jIDAwMCAgIDAwMCAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcbiMgMDAgICAgIDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwICAgICAwMFxuXG57IHdpbiwga2xvZywgJCB9ID0gcmVxdWlyZSAna3hrJ1xuXG5LaWtpICAgICAgICA9IHJlcXVpcmUgJy4va2lraSdcbmVsZWN0cm9uICAgID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5wa2cgICAgICAgICA9IHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcblxuaXBjICAgICAgICAgPSBlbGVjdHJvbi5pcGNSZW5kZXJlclxucmVtb3RlICAgICAgPSBlbGVjdHJvbi5yZW1vdGVcbkJyb3dzZXJXaW5kb3cgPSByZW1vdGUuQnJvd3NlcldpbmRvd1xud2luSUQgICAgICAgPSBudWxsXG5cbiMgMDAwICAwMDAwMDAwMCAgICAwMDAwMDAwXG4jIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIFxuIyAwMDAgIDAwMDAwMDAwICAgMDAwICAgICBcbiMgMDAwICAwMDAgICAgICAgIDAwMCAgICAgXG4jIDAwMCAgMDAwICAgICAgICAgMDAwMDAwMFxuXG5pcGMub24gJ3NldFdpbklEJywgKGV2ZW50LCBpZCkgPT4gd2luSUQgPSB3aW5kb3cud2luSUQgPSBpZFxuICAgIFxuIyAwMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwICAwMDAwMDAwICAwMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgICAwMDAgICAwMDAgICAgIFxuIyAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgIDAwMCAgICAwMDAwMDAwIFxuIyAwMDAgICAwMDAgIDAwMCAgICAgICAgICAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICAgMDAwICAwMDAwMDAwICAwMDAwMDAwMFxuXG5zY3JlZW5TaXplID0gPT4gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplXG5cbndpbmRvdy5vbnJlc2l6ZSA9ID0+IHdpbmRvdy5zdGFnZS5yZXNpemVkKClcbndpbmRvdy5vbnVubG9hZCA9ID0+IFxud2luZG93Lm9ubG9hZCAgID0gPT4gXG4gICAgd2luZG93LnN0YWdlID0gbmV3IEtpa2kgJChcIi5zdGFnZVwiKSBcbiAgICB3aW5kb3cuc3RhZ2Uuc3RhcnQoKVxuXG4jIDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwMFxuIzAwMCAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICBcbiMwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgXG4jICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAwMDAwICAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgIFxuIzAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgICAwMDAgICBcblxuc2NyZWVuU2hvdCA9IC0+XG4gICAgd2luID0gQnJvd3NlcldpbmRvdy5mcm9tSWQgd2luSUQgXG4gICAgd2luLmNhcHR1cmVQYWdlIChpbWcpIC0+XG4gICAgICAgIGZpbGUgPSAnc2NyZWVuU2hvdC5wbmcnXG4gICAgICAgIHJlbW90ZS5yZXF1aXJlKCdmcycpLndyaXRlRmlsZSBmaWxlLCBpbWcudG9QbmcoKSwgKGVycikgLT4gXG4gICAgICAgICAgICBrbG9nICdzYXZpbmcgc2NyZWVuc2hvdCBmYWlsZWQnLCBlcnIgaWYgZXJyP1xuICAgICAgICAgICAga2xvZyBcInNjcmVlbnNob3Qgc2F2ZWQgdG8gI3tmaWxlfVwiXG4gICAgICAgICJdfQ==
//# sourceURL=../coffee/window.coffee